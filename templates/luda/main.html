<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ko">
<head>
    {% load static %}
    <link rel="shortcut icon" href="{% static 'favicon.ico' %}">
    <link rel="icon" href="{% static 'favicon-16x16.png' %}" sizes="16x16">
    <link rel="icon" href="{% static 'favicon-32x32.png' %}" sizes="32x32">
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <title> :: 루다 저장소 :: </title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0"/>
    <meta name="description" content="루다 랜덤짤 저장소"/>
    <meta name="robots" content="index, follow"/>
    <meta name="keywords" content="루다, 이루다, 우주소녀"/>
    <meta property="og:type" content="website">
    <meta property="og:title" content=" :: 루다 저장소 :: ">
    <meta property="og:description" content="루다 랜덤짤, 움짤 저장소">
    <meta property="og:url" content="http://luda.tk/">

    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script async type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/jquery.lazyload/1.9.1/jquery.lazyload.min.js"></script>
    <script defer src="{% static 'js/jquery.flexverticalcenter.js' %}"></script>

    <script async type="text/javascript" src="{% static 'js/bootstrap.min.js' %}"></script>
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <script async type='text/javascript'
            src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.5.0/js/bootstrap-datepicker.min.js"></script>
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.5.0/css/bootstrap-datepicker3.min.css">
    <script async type="text/javascript" src="{% static 'js/bootstrap-datepicker.kr.js' %}" charset="UTF-8"></script>
    <script type='text/javascript'>
        $(function () {
            $('.input-group.date').datepicker({
                calendarWeeks: false,
                todayHighlight: true,
                autoclose: true,
                format: "yyyy-mm-dd",
                language: "kr"
            });
        });
    </script>
    <link rel="stylesheet" type="text/css" href="https://cdn.rawgit.com/moonspam/NanumSquare/master/nanumsquare.css">
    <style>
        a#MOVE_TOP_BTN {
            position: fixed;
            right: 2%;
            bottom: 50px;
            display: none;
            z-index: 9999;
        }
        .overzoom img {
            -webkit-transform: scale(1);
            -moz-transform: scale(1);
            -ms-transform: scale(1);
            -o-transform: scale(1);
            transform: scale(1);
            -webkit-transition: .3s;
            -moz-transition: .3s;
            -ms-transition: .3s;
            -o-transition: .3s;
            transition: .3s;

        }
        .overzoom:hover img {
            -webkit-transform: scale(1.12);
            -moz-transform: scale(1.12);
            -ms-transform: scale(1.12);
            -o-transform: scale(1.12);
            transform: scale(1.12);
        }
    </style>
    <style type="text/css">
        body {
            text-align: center;
        }

        @media (min-width: 768px) {
          .navbar-nav.navbar-center {
            position: absolute;
            left: 50%;
            transform: translatex(-50%);
          }
        }

        body		{ font-family: 'NanumSquare', sans-serif; }
        .normal		{ font-weight: 400 }
        .bold		{ font-weight: 700 }
        .bolder		{ font-weight: 800 }
        .light		{ font-weight: 300 }
    </style>
</head>

<body style="overflow-x:hidden">
<nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <button type="button" id="tog" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#myNavbar" aria-expanded="false">
		<span class="sr-only">Toggle Navigation</span>
		<span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">루다 저장소</a>
        </div>
        <div class="collapse navbar-collapse" id="myNavbar">
            <ul class="nav navbar-nav navbar-center">
                <li><a href="#" id="picture"><span class="glyphicon glyphicon-heart"></span> Image :D</a></li>
                <li><a href="#" id="gif"><span class="glyphicon glyphicon-heart"></span> GIF :)</a></li>
                <li><a href="/up/normal-upload" id="upload"><span class="glyphicon glyphicon-heart"></span> Upload !</a></li>
                <li class="dropdown">
                    <a href="#" id="filter" class="dropdown-toggle" data-toggle="dropdown"><span
                            class="glyphicon glyphicon-calendar"></span> 업데이트 날짜별로 보기<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <div style="width: 300px" class="container">
                            2018-03-01 이후로 조회 가능합니다.
                            <div class="input-group date">
                                <input type="text" class="form-control" id="pick-date" readonly><span class="input-group-addon"><i
                                    class="glyphicon glyphicon-calendar"></i></span>
                            </div>
                        </div>
                    </ul>
                </li>
                <li><a href="#" id="re"><span class="glyphicon glyphicon-refresh"></span> 다시 로딩하기</a></li>
            </ul>
        </div>
    </div>
</nav>


<br><br><br><br><br><br>
<div class="row">
    <div class="col-md-4"></div>
    <div class="col-md-4"><div style="width:100%; padding:23px;"><a href="/"><img class="img-rounded" style="width: 100%; height: auto;" alt="" src="../static/banner.gif"></></a>
    <p class="bolder" style="color: #31708f">Click to rearrange</p>
            <p class="normal" id="mine" style="color: #d9534f">
            <br><br>e-mail: lmwljw98@naver.com</p>
    </div></div>
    <div class="col-md-4"></div>
</div>

<a class="btn btn-success" style="text-decoration:none;" href="../static/zip/luda_tk_image.zip" download>Download Image
    ZIP</a>
<a class="btn btn-info" style="text-decoration:none;" href="../static/zip/luda_tk_gif.zip" download>Download GIF ZIP</a>

<br><br><br><br>

<a class="btn btn-default" style="text-decoration:none;" id="MOVE_TOP_BTN" href="#">TOP</a>

<br><br><br><br><br><br><br><br><br>

<div class="container">
    <div class="row" id="row">
    </div>
</div>
<script>
    $(window).scroll(function () {
        if ($(this).scrollTop() > 100) {
            $('#MOVE_TOP_BTN').fadeIn();
        } else {
            $('#MOVE_TOP_BTN').fadeOut();
        }
    });

    $("#MOVE_TOP_BTN").click(function () {
        $('html, body').animate({
            scrollTop: 0
        }, 400);
        return false;
    });

    function changeHeight() {
        var maxHeight2 = -1;

        $('.overzoom').each(function () {
            maxHeight2 = maxHeight2 > $(this).height() ? maxHeight2 : $(this).height();
        });

        $('.overzoom').each(function () {
            $(this).height(maxHeight2);
        });
    }
</script>

<script>
    var i = 6;
    var mode = 0;
    var arr = {{ my | safe }};
    var arr2 = {{ my2 | safe }};
    var update_time = {{ update | safe }}

    var pick = "";

    function filtering(array) {
        if (array.startsWith(pick, 1)){
            return array;
        }
        if (array.startsWith(pick, 0)){
            return array;
        }
    }

    var filtered = [];

    $("#re").click(function () {
        if(mode == 0) {
            $('html, body').animate({
                scrollTop: 0
            }, 0);
            //$('.navbar-toggle').click();
            pick = "";
            $('#pick-date').val("");
            $("#row").empty();
            mode = 0;
            i = 6;
            for (var j = 0; j < 6; j++) {
                $("#row").append('<div class="col-md-4"><div class="overzoom" style="width:100%; float:left; padding:23px;"><a href="../static/image/' + arr[j] + '" download><img src="../static/image/' + arr[j] + '" class="img-rounded img-responsive" style="width: 100%; height: auto;"></a></div></div>').children(':last').hide().fadeIn(2000);
            }
        }
        else if(mode == 1){
            $('html, body').animate({
                scrollTop: 0
            }, 0);
            //$('.navbar-toggle').click();
            pick = "";
            $('#pick-date').val("");
            $("#row").empty();
            mode = 1;
            i = 6;
            for (var j = 0; j < 6; j++) {
                $("#row").append('<div class="col-md-4"><div class="overzoom" style="width:100%; float:left; padding:23px;"><a href="../static/gif/' + arr2[j] + '" download><img src="../static/gif/' + arr2[j] + '" class="img-rounded img-responsive" style="width: 100%; height: auto;"></a></div></div>').children(':last').hide().fadeIn(2000);
            }
        }
        else if(mode == 2){
            pick = $('#pick-date').val();
            filtered = arr.filter(filtering);
            $('html, body').animate({
                scrollTop: 0
            }, 0);
            //$('.navbar-toggle').click();
            $("#row").empty();
            mode = 2;
            i = 6;
            for (var j = 0; j < 6; j++) {
                $("#row").append('<div class="col-md-4"><div class="overzoom" style="width:100%; float:left; padding:23px;"><a href="../static/image/' + filtered[j] + '" download><img src="../static/image/' + filtered[j] + '" class="img-rounded img-responsive" style="width: 100%; height: auto;"></a></div></div>').children(':last').hide().fadeIn(2000);
            }
        }
    });

    $('#pick-date').change(function () {
        pick = $('#pick-date').val();
        filtered = arr.filter(filtering);
        $('html, body').animate({
            scrollTop: 0
        }, 0);
        //$('.navbar-toggle').click();
        $("#row").empty();
        mode = 2;
        i = 6;
        for (var j = 0; j < 6; j++) {
            $("#row").append('<div class="col-md-4"><div class="overzoom" style="width:100%; float:left; padding:23px;"><a href="../static/image/' + filtered[j] + '" download><img src="../static/image/' + filtered[j] + '" class="img-rounded img-responsive" style="width: 100%; height: auto;"></a></div></div>').children(':last').hide().fadeIn(2000);
        }
    });

    $("#picture").click(function () {
        $('html, body').animate({
            scrollTop: 0
        }, 0);
        //$('.navbar-toggle').click();
        pick = "";
        $('#pick-date').val("");
        $("#row").empty();
        mode = 0;
        i = 6;
        for (var j = 0; j < 6; j++) {
            $("#row").append('<div class="col-md-4"><div class="overzoom" style="width:100%; float:left; padding:23px;"><a href="../static/image/' + arr[j] + '" download><img src="../static/image/' + arr[j] + '" class="img-rounded img-responsive" style="width: 100%; height: auto;"></a></div></div>').children(':last').hide().fadeIn(2000);
        }
    });

    $("#gif").click(function () {
        $('html, body').animate({
            scrollTop: 0
        }, 0);
        //$('.navbar-toggle').click();
        pick = "";
        $('#pick-date').val("");
        $("#row").empty();
        mode = 1;
        i = 6;
        for (var j = 0; j < 6; j++) {
            $("#row").append('<div class="col-md-4"><div class="overzoom" style="width:100%; float:left; padding:23px;"><a href="../static/gif/' + arr2[j] + '" download><img src="../static/gif/' + arr2[j] + '" class="img-rounded img-responsive" style="width: 100%; height: auto;"></a></div></div>').children(':last').hide().fadeIn(2000);
        }
    });

    $("#mine").after('<p class="normal" style="color:#5897fb"><br>' + 'Last Update: ' + update_time[0] + '</p><br>' + (arr.length) + ' pics<br>' + (arr2.length) + ' gifs<br>사진을 클릭하면 다운로드 됩니다.');

    for (var j = 0; j < 6; j++) {
        $("#row").append('<div class="col-md-4"><div class="overzoom" style="width:100%; float:left; padding:23px;"><a href="../static/image/' + arr[j] + '" download><img src="../static/image/' + arr[j] + '" class="img-rounded img-responsive" style="width: 100%; height: auto;"></a></div></div>').children(':last').hide().fadeIn(2000);
    }

    $(document).scroll(function () {
        if (pick == "") {
            changeHeight();
            $('.img-responsive').flexVerticalCenter();

            var maxHeight = $(document).height();
            var currentScroll = $(window).scrollTop() + $(window).height();

            if (maxHeight <= currentScroll + 150) {
                if (mode == 0 && typeof arr[i] != "undefined") {
                    $("#row").append('<div class="col-md-4"><div class="overzoom" style="width:100%; float:left; padding:23px;"><a href="../static/image/' + arr[i] + '" download><img src="../static/css/loading.gif" data-original="../static/image/' + arr[i] + '" class="img-rounded img-responsive lazy" id="' + i + '" style="width: 100%; height: auto;"></a></div></div>');
                    $("img.lazy#" + i).lazyload();
                    i++;
                }
                if (mode == 1 && typeof arr2[i] != "undefined") {
                    $("#row").append('<div class="col-md-4"><div class="overzoom" style="width:100%; float:left; padding:23px;"><a href="../static/gif/' + arr2[i] + '" download><img src="../static/css/loading.gif" data-original="../static/gif/' + arr2[i] + '" class="img-rounded img-responsive lazy" id="' + i + '" style="width: 100%; height: auto;"></a></div></div>');
                    $("img.lazy#" + i).lazyload();
                    i++;
                }
            }
        }

        else{
            changeHeight();
            $('.img-responsive').flexVerticalCenter();

            var maxHeight = $(document).height();
            var currentScroll = $(window).scrollTop() + $(window).height();

            if (maxHeight <= currentScroll + 150) {
                if (mode == 2 && typeof filtered[i] != "undefined") {
                    $("#row").append('<div class="col-md-4"><div class="overzoom" style="width:100%; float:left; padding:23px;"><a href="../static/image/' + filtered[i] + '" download><img src="../static/css/loading.gif" data-original="../static/image/' + filtered[i] + '" class="img-rounded img-responsive lazy" id="' + i + '" style="width: 100%; height: auto;"></a></div></div>');
                    $("img.lazy#" + i).lazyload();
                    i++;
                }
            }
        }
    });
</script>
</body>
</html>
